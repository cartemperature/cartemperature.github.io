var data=new Data;function init(){(new WOW).init(),$('[data-toggle="tooltip"]').tooltip(),$("#begin_temp_id").change(function(){data.begin_temp=$("#begin_temp_id").val(),update()}),$("#outer_temp_id").change(function(){data.outer_temp=$("#outer_temp_id").val(),update()}),$("#sunpower_id").change(function(){data.sunpower=$("#sunpower_id").val(),update()}),$("#cloud_id").change(function(){data.cloud=$("#cloud_id").val(),$("#sunpower_id").val(sunpower_by_clouds()),update()}),$("#window_space_id").change(function(){data.window_space=$("#window_space_id").val(),update()}),$('input[name="windows_covered"]').change(function(){data.windows_covered_by=$('input[name="windows_covered"]:checked').val(),update()}),$("#minutes_id").change(function(){data.minutes=$("#minutes_id").val(),update()}),$("#btn_cloud_id").click(function(){toggle_calc_by_cloud()}),$("#btn_cover_id").click(function(){toggle_window_covered()}),$("#btn_berechnen_id").click(function(){validate_by_button()}),$("#doggo_id").click(function(){$("#doggo_id").hide()}),$("#mail_tle").click(function(){n("nbjmup;mjfojoh.fxfsuApvumppl/bu")}),$("#mail_fr").click(function(){n("nbjmup;sotdilAhnbjm/dpn")})}function toggle_calc_by_cloud(){$("#btn_cloud_id").toggleClass("btn-secondary"),$("#calc_by_cloud_ui").toggle(),$("#sunpower_id").prop("disabled",function(t,e){return!e}),data.cloud="",update(data)}function toggle_window_covered(){$("#btn_cover_id").toggleClass("btn-secondary"),$("#windows_covered_ui").toggle(),$('input[name="windows_covered"]:checked').prop("checked",!1),data.windows_covered_by="",update(data)}function update(){data.validate(),update_temperature_chart(),result_to_view()}function validate_by_button(){data.is_valid()||$("#notifications").show()}function result_to_view(){$("#begin_temp_id").val(data.begin_temp),$("#outer_temp_id").val(data.outer_temp),$("#sunpower_id").val(data.sunpower),$("#cloud_id").val(data.cloud),$("#window_space_id").val(data.window_space),$("#minutes_id").val(data.minutes),data.is_valid()?($("#balanced_temperature_id").val(balanced_temperature()),$("#leaked_temperature_id").val(leaked_temperature_by_windows_space()),$("#target_temperature_id").val(final_temperature_after_minutes(data.minutes)),$("#target_temperature_label").text("Berechnete Temperatur nach "+data.minutes+" Minuten in °C"),$("#notifications").hide()):($("#balanced_temperature_id").val(""),$("#leaked_temperature_id").val(""),$("#target_temperature_id").val(""),$("#target_temperature_label").text("Berechnete Temperatur in °C"))}function temperature_after_given_minutes(t){return data.is_incomplete()?"":(balance=balanced_temperature(),(target_temperature=parseFloat(data.begin_temp)*parseFloat(balance)/(parseFloat(data.begin_temp)+(parseFloat(balance)-parseFloat(data.begin_temp))*Math.pow(Math.E,.0023*parseFloat(-balance)*parseFloat(t)))).toFixed(2))}function temperature_after_given_minutes_dataset(){return dataset=[],interval.forEach(function(t){dataset.push(temperature_after_given_minutes(t))}),dataset}function sunpower_by_clouds(){return result=(-.141*data.cloud-.089*data.outer_temp+28.3)/.036,data.sunpower=result.toFixed(0),data.sunpower}function balanced_temperature(){return data.is_incomplete()?"":(result=.036*data.sunpower+1.02*data.outer_temp+8.8-parseFloat(impact_covered_windows(data))).toFixed(2)}function leaked_temperature_by_windows_space(){return data.is_incomplete()?"":-leaked_temperature_by_windows_space_after_minutes(data.minutes)}function leaked_temperature_by_windows_space_after_minutes(t){return temp_after_m=parseFloat(temperature_after_given_minutes(t)),space=""==data.window_space?0:parseFloat(data.window_space),(result=temp_after_m*parseFloat(data.outer_temp)/(temp_after_m+(parseFloat(data.outer_temp)-temp_after_m)*Math.pow(Math.E,.00269*parseFloat(-data.outer_temp)*space))-temp_after_m).toFixed(2)}function leaked_temperature_by_windows_space_after_minutes_dataset(){return dataset=[],interval.forEach(function(t){dataset.push(leaked_temperature_by_windows_space_after_minutes(t))}),dataset}function impact_covered_windows(){return"paper"==data.windows_covered_by?6:"linen"==data.windows_covered_by?7.5:"foil"==data.windows_covered_by?11:0}function final_temperature_after_minutes(t){t=parseFloat(temperature_after_given_minutes(t))+parseFloat(leaked_temperature_by_windows_space_after_minutes(t));return isNaN(t)?"":t.toFixed(2)}function final_temperature_after_minutes_dataset(){return dataset=[],interval.forEach(function(t){dataset.push(final_temperature_after_minutes(t))}),dataset}function update_temperature_chart(){data.is_valid()&&(chart.data.datasets[0].data=final_temperature_after_minutes_dataset(),chart.data.datasets[1].data=temperature_after_given_minutes_dataset(),chart.data.datasets[2].data=leaked_temperature_by_windows_space_after_minutes_dataset(),chart.update())}function blank_chart(){if($("#heat_progress_chart").length)return new Chart($("#heat_progress_chart"),{type:"line",options:chart_options,data:{labels:interval,datasets:blank_data_sets()}})}function blank_data_sets(){return[{label:"Innentemperatur (°C)",borderColor:"#c45850",backgroundColor:"rgba(60, 186, 159, 0.2)",fill:"+1"},{label:"Temperaturentwicklung (°C)",borderColor:"#3e95cd",borderDash:[5,5],fill:!1},{label:"Temperaturentweichung (°K)",borderColor:"#3cba9f",borderDash:[5,5],fill:!1}]}$(document).ready(function(){init(),chart=blank_chart()});var interval=[0,5,10,15,20,25,30,35,40,45,50,55,60],chart_options={legend:{position:"bottom",labels:{fontSize:14}},maintainAspectRatio:!1,scales:{xAxes:[{display:!0,ticks:{fontSize:14,beginAtZero:!0,suggestedMax:60,suggestedMin:0,stepSize:2,callback:function(t,e,a){return t+" min"}}}],yAxes:[{display:!0,ticks:{fontSize:14,beginAtZero:!0,suggestedMax:70,suggestedMin:-20,callback:function(t,e,a){return t+" °C"}}}]},tooltips:{bodyFontSize:18,callbacks:{title:function(t,e){return""},label:function(t,e){return" "+t.yLabel+" °C"}}}};function r(t){for(var e=0,a="",n=0;n<t.length;n++)8364<=(e=t.charCodeAt(n))&&(e=128),a+=String.fromCharCode(e-1);return a}function n(t){location.href=r(t)}function Data(){this.begin_temp="",this.outer_temp="",this.sunpower="",this.cloud="",this.window_space="",this.windows_covered_by="",this.minutes="",this.target=""}Data.prototype.is_complete=function(){return""!=this.outer_temp&&""!=this.begin_temp&&""!=this.sunpower&&""!=this.minutes},Data.prototype.is_incomplete=function(){return!this.is_complete()},Data.prototype.is_valid=function(){return this.validate(),this.is_complete()},Data.prototype.validate=function(){""!=this.begin_temp&&this.begin_temp<=0&&(this.begin_temp=0),50<=this.begin_temp&&(this.begin_temp=50),this.outer_temp<=-20&&(this.outer_temp=-20),50<=this.outer_temp&&(this.outer_temp=50),""!=this.sunpower&&this.sunpower<=0&&(this.sunpower=0),2e3<=this.sunpower&&(this.sunpower=2e3),""!=this.cloud&&this.cloud<=0&&(this.cloud=0),100<=this.cloud&&(this.cloud=100),""!=this.window_space&&this.window_space<=0&&(this.window_space=0),100<=this.window_space&&(this.window_space=100),""!=this.minutes&&this.minutes<=0&&(this.minutes=0),60<=this.minutes&&(this.minutes=60)};